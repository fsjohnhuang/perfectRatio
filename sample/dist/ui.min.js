var perfectRatioUI =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.toArray = toArray;
exports.partial = partial;
exports.debounce = debounce;
exports.saveToLocal = saveToLocal;
exports.getFromLocal = getFromLocal;
exports.getBrowserInfo = getBrowserInfo;
exports.IE11 = exports.CHROME = void 0;

function toArray(arrayLike, startIndex) {
  return Array.prototype.slice.call(arrayLike, startIndex || 0);
}

function partial(f) {
  var presetArgs = toArray(arguments, 1);
  return function () {
    var args = toArray(arguments);
    return f.apply(null, presetArgs.concat(args));
  };
}

function debounce(delay, f) {
  var presetArgs = toArray(arguments, 2);
  var descriptor;
  return function () {
    clearTimeout(descriptor);
    var args = toArray(arguments);
    descriptor = setTimeout(function () {
      f.apply(null, presetArgs.concat(args));
    }, delay);
  };
}

function saveToLocal(key, val) {
  localStorage.setItem(key, val);
}

function getFromLocal(key) {
  return localStorage.getItem(key);
}

var CHROME = 0;
exports.CHROME = CHROME;
var IE11 = 1;
exports.IE11 = IE11;
var rChrome = /Chrome|Chromium/i;

function getBrowserInfo() {
  var ua = navigator.userAgent;

  if (rChrome.test(ua)) {
    return CHROME;
  } else {
    return IE11;
  }
}

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.render = render;

var _utils = __webpack_require__(0);

var _perfectRatio = __webpack_require__(2);

/*!
 * @version 0.1.0
 * @author fsjohnhuang
 * @email fsjohnhuang@hotmail.com
 * @homepage fsjohnhuang.cnblogs.com
 * @license MIT
 */
var RIGHT = 60,
    FONT_SIZE = 40,
    WIDTH = 650,
    IMG_WIDTH = 100,
    IMG_HEIGHT = 80,
    MARGIN_TOP = 10;
var invoked = false;

function render() {
  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "Hi dear, for better experience.<br>Set the Scaling to 100% please!!";
  if (invoked) return;
  invoked = true;
  var mask = renderMask(text),
      prInst = (0, _perfectRatio.pr)(),
      h = hideTips(mask),
      s = showTips(prInst, mask),
      f = (0, _utils.partial)(onRatioChanged, h, s, s, s);
  prInst.addEventListener("ratio-changed", f);
  prInst.detect();
}

function onRatioChanged(perfectHandler, zoomHandler, zoomInHandler, zoomOutHandler, evt) {
  console.log(evt.detail);

  switch (evt.detail) {
    case _perfectRatio.PERFECT:
      perfectHandler();
      break;

    case _perfectRatio.ZOOM:
      zoomHandler();
      break;

    case _perfectRatio.ZOOM_IN:
      zoomInHandler();
      break;

    case _perfectRatio.ZOOM_OUT:
      zoomOutHandler();
      break;
  }
}

function showTips(pr, mask) {
  return function () {
    var right = pr.calcInRatio(RIGHT),
        fontSize = pr.calcInRatio(FONT_SIZE),
        width = pr.calcInRatio(WIDTH),
        imgW = pr.calcInRatio(IMG_WIDTH),
        imgH = pr.calcInRatio(IMG_HEIGHT),
        marginTop = pr.calcInRatio(MARGIN_TOP);
    updateMask(mask, right, fontSize, width, imgW, imgH, marginTop);
    mask.style.display = "block";
  };
}

function hideTips(mask) {
  return function () {
    return mask.style.display = "none";
  };
}

function tplChrome(right, fontSize, width, imgWidth, imgHeight, marginTop, text) {
  return "<div style=\"position:fixed;height:100%;width:100%;background:rgba(0,0,0,0.2);top:0;left:0;\">\n    <p style=\"position:fixed;right:".concat(right, "px;top:0;font-size:").concat(fontSize, "px;width:").concat(width, "px;margin-top:").concat(marginTop, "px;text-align:right;\">\n      <img src=\"./asset/true.png\" width=\"").concat(imgWidth, "\" height=\"").concat(imgHeight, "\" style=\"float:right;\">\n      ").concat(text, "\n    </p>\n   </div>");
}

function tplIE11(right, fontSize, width, imgWidth, imgHeight, marginTop, text) {
  return "<div style=\"position:fixed;height:100%;width:100%;background:rgba(0,0,0,0.2);top:0;left:0;\">\n    <p style=\"position:fixed;right:".concat(right, "px;bottom:0;font-size:").concat(fontSize, "px;width:").concat(width, "px;margin-top:").concat(marginTop, "px;text-align:right;\">\n      <img src=\"./asset/true.png\" width=\"").concat(imgWidth, "\" height=\"").concat(imgHeight, "\" style=\"float:right;transform:rotateX(180deg);position:relative;top:50px;\">\n      ").concat(text, "\n    </p>\n   </div>");
}

function tpl(text) {
  var html;

  switch ((0, _utils.getBrowserInfo)()) {
    case _utils.CHROME:
      html = tplChrome(RIGHT, FONT_SIZE, WIDTH, IMG_WIDTH, IMG_HEIGHT, MARGIN_TOP, text);
      break;

    case _utils.IE11:
      html = tplIE11(RIGHT, FONT_SIZE, WIDTH, IMG_WIDTH, IMG_HEIGHT, MARGIN_TOP, text);
      break;
  }

  return html;
}

function updateMaskIE11(mask, right, fontSize, width, imgWidth, imgHeight, marginTop) {
  mask.firstElementChild.style.right = right + "px";
  mask.firstElementChild.style.width = width + "px";
  mask.firstElementChild.style.fontSize = fontSize + "px";
  mask.firstElementChild.style.marginTop = marginTop + "px";
  mask.querySelector("img").width = imgWidth;
  mask.querySelector("img").height = imgHeight;
  mask.querySelector("img").style.top = (0, _perfectRatio.pr)().calcInRatio(50) + "px";
}

function updateMaskChrome(mask, right, fontSize, width, imgWidth, imgHeight, marginTop) {
  mask.firstElementChild.style.right = right + "px";
  mask.firstElementChild.style.width = width + "px";
  mask.firstElementChild.style.fontSize = fontSize + "px";
  mask.firstElementChild.style.marginTop = marginTop + "px";
  mask.querySelector("img").width = imgWidth;
  mask.querySelector("img").height = imgHeight;
}

function updateMask(mask, right, fontSize, width, imgWidth, imgHeight, marginTop) {
  switch ((0, _utils.getBrowserInfo)()) {
    case _utils.CHROME:
      updateMaskChrome(mask, right, fontSize, width, imgWidth, imgHeight, marginTop);
      break;

    case _utils.IE11:
      updateMaskIE11(mask, right, fontSize, width, imgWidth, imgHeight, marginTop);
      break;
  }
}

function renderMask(text) {
  var html = tpl(text),
      mask = createDom(html);
  document.body.appendChild(mask);
  return mask;
}

function createDom(html) {
  var div = document.createElement("div");
  div.innerHTML = html;
  return div.firstChild;
}

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pr = pr;
exports.ZOOM_OUT = exports.ZOOM_IN = exports.ZOOM = exports.PERFECT = void 0;

var _utils = __webpack_require__(0);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// the status of scaling
var PERFECT = -1;
exports.PERFECT = PERFECT;
var ZOOM = 0;
exports.ZOOM = ZOOM;
var ZOOM_IN = 1;
exports.ZOOM_IN = ZOOM_IN;
var ZOOM_OUT = 2; // supported event types

exports.ZOOM_OUT = ZOOM_OUT;
var EVENT_TYPES = ["ratio-changed"],
    DEFAULT_PR = 1,
    RATIOS = [1, 1.5, 2],
    STORAGE_KEY = "perfectRatio.perfect_ratio"; // singleton pattern

var singleton;

function pr() {
  if (!singleton) {
    singleton = new PR(DEFAULT_PR, RATIOS, STORAGE_KEY);
  }

  return singleton;
}
/* @constructor
 */


var PR =
/*#__PURE__*/
function () {
  _createClass(PR, null, [{
    key: "PERFECT",
    get: function get() {
      return PERFECT;
    }
  }, {
    key: "ZOOM",
    get: function get() {
      return ZOOM;
    }
  }, {
    key: "ZOOM_IN",
    get: function get() {
      return ZOOM_IN;
    }
  }, {
    key: "ZOOM_OUT",
    get: function get() {
      return ZOOM_OUT;
    }
  }]);

  function PR(defaultPR, ratios, storageKey) {
    _classCallCheck(this, PR);

    var self = this;
    self.defaultPR = defaultPR; // default perfect ratio I suppose

    self.ratios = ratios; // perfect ratio maybe

    self.storageKey = storageKey;
    self.__dom = document.createElement("div");
    self.__detecting = false;
  }
  /* @description Get the current ratio status
   * @return {PERFECT|ZOOM|ZOOM_IN|ZOOM_OUT}
   */


  _createClass(PR, [{
    key: "getRatioStatus",
    value: function getRatioStatus() {
      var self = this,
          storageKey = self.storageKey,
          ratios = self.ratios,
          outerWidth = window.outerWidth,
          innerWidth = window.innerWidth,
          outerHeight = window.outerHeight,
          innerHeight = window.innerHeight,
          devicePixelRatio = window.devicePixelRatio;

      var status = _getRatioStatus(ratios, outerWidth, innerWidth, outerHeight, innerHeight, devicePixelRatio);

      if (PERFECT === status) {
        (0, _utils.saveToLocal)(storageKey, devicePixelRatio);
      }

      return status;
    }
    /* @description Get the perfect ratio
     * @return {Number}
     */

  }, {
    key: "getPerfectRatio",
    value: function getPerfectRatio() {
      var self = this,
          storageKey = self.storageKey,
          defaultPR = self.defaultPR;
      var ratio = (0, _utils.getFromLocal)(storageKey) || defaultPR;
      return ratio;
    }
    /* @description transform the input number to what is fit to current ratio
     * @param {Number}
     * @return {Number}
     */

  }, {
    key: "calcInRatio",
    value: function calcInRatio(num) {
      var self = this,
          perfectRatio = self.getPerfectRatio(),
          currRatio = window.devicePixelRatio;
      return perfectRatio / currRatio * num;
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(eventType, f) {
      if (!~EVENT_TYPES.indexOf(String(eventType || "").toLowerCase())) {
        throw Error("PR doesn't support event type " + eventType + ".");
      }

      var self = this;

      self.__dom.addEventListener(eventType, f);
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(eventType, f) {
      if (!~EVENT_TYPES.indexOf(String(eventType || "").toLowerCase())) {
        throw Error("PR doesn't support event type " + eventType + ".");
      }

      var self = this;

      self.__dom.removeEventListener(eventType, f);
    }
  }, {
    key: "detect",
    value: function detect() {
      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 50;
      var self = this;

      if (self.__detecting) {
        throw Error("Has been detecting!");
      }

      self.__detecting = true;
      var ratioChangedDetecter = (0, _utils.debounce)(delay, function () {
        fireRatioChangedEvent(self.__dom, self.getRatioStatus());
      });
      window.addEventListener("resize", ratioChangedDetecter);
      ratioChangedDetecter();
    }
  }]);

  return PR;
}();
/* @description get the current ratio status
 * @private
 * @param {Array<Number>} ratios
 * @param {Number} outerWidth
 * @param {Number} innerWidth
 * @param {Number} outerHeight
 * @param {Number} innerHeight
 * @param {Number} currRatio
 * @return {PERFECT|ZOOM|ZOOM_IN|ZOOM_OUT}
 */


function _getRatioStatus(ratios, outerWidth, innerWidth, outerHeight, innerHeight, currRatio) {
  var status;

  if (isConsoling()) {
    status = isPerfectInConsole(ratios, currRatio, outerWidth, innerWidth, outerHeight, innerHeight) ? PERFECT : ZOOM;
  } else {
    status = isPerfectInView(ratios, outerWidth, innerWidth, currRatio) ? PERFECT : isZoomIn(outerWidth, innerWidth) ? ZOOM_IN : ZOOM_OUT;
  }

  return status;
}

function fireRatioChangedEvent(el, status) {
  var evt = document.createEvent("CustomEvent");
  evt.initCustomEvent("ratio-changed", false, false, status);
  el.dispatchEvent(evt);
}
/* @description Console pane is open or not
 * @private
 * @return {Boolean} - true: open, false: close
 */


function isConsoling() {
  var open = false,
      el = document.createElement("div");
  Object.defineProperty(el, "id", {
    get: function get() {
      open = true;
    }
  });
  console.log("%c", el);
  return open;
}
/* @description Ratio is perfect or not without opening Console pane
 * @private
 * @param {Array<Number>} ratios - perfect ratios maybe
 * @param {Number} outerWidth - window.outerWidth
 * @param {Number} innerWidth - window.innerWidth
 * @param {Number} ratio - current ratio
 * @return {Boolean}
 */


function isPerfectInView(ratios, outerWidth, innerWidth, ratio) {
  return Math.abs(outerWidth - innerWidth) < 17 // the dVal between outerWidth and innerWidth is 16px in IE11
  && !!~ratios.indexOf(ratio);
}
/* @description Ratio is perfect or not with opening Console pane
 * @private
 * @param {Array<Number>} ratios - perfect ratios maybe
 * @param {Number} ratio - current ratio
 * @return {Boolean}
 */


function isPerfectInConsole(ratios, ratio, outerWidth, innerWidth, outerHeight, innerHeight) {
  var dW = Math.abs(outerWidth - innerWidth),
      dH = Math.abs(outerHeight - innerHeight);
  return !!~ratios.indexOf(ratio) && (dW < 17 || dH < 17);
}
/* @description Zoom in or not
 * @private
 * @param {Number} outerWidth - window.outerWidth
 * @param {Number} innerWidth - window.innerWidth
 * @return {Boolean}
 */


function isZoomIn(outerWidth, innerWidth) {
  return outerWidth - innerWidth > 16; // the dVal between outerWidth and innerWidth is 16px in IE11
}
/* @description Zoom out or not
 * @private
 * @param {Number} outerWidth - window.outerWidth
 * @param {Number} innerWidth - window.innerWidth
 * @return {Boolean}
 */


function isZoomOut(outerWidth, innerWidth) {
  return innerWidth - outerWidth > -16; // the dVal between outerWidth and innerWidth is 16px in IE11
}

/***/ })
/******/ ]);